(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-636e4388"],{"01dc":function(t,e,a){},"077a":function(t,e,a){},"2b33":function(t,e,a){},"2e67b":function(t,e,a){},"2f88":function(t,e,a){"use strict";var i,s,n,o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.pageData?a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"page-thumbnail-panel"},[!t.pageData.isPublish&&t.showPublishState?a("span",{staticClass:"unpublish"},[t._v("未发布")]):t._e(),a("div",{staticClass:"thumbnail-panel-cover"},[a("div",{staticClass:"header-mask"},[a("div",{staticClass:"details-btn",on:{click:function(e){return t.preview(t.pageData._id)}}},[t._v("预览")])]),a("div",{staticClass:"image-wrapper"},[a("img",{attrs:{src:t.pageData.coverImage||t.defaultCoverImage,alt:"",onerror:t.defaultImg}})])]),a("div",{staticClass:"page-item-title border-T ellipsis"},[a("span",{staticClass:"item-title-i",attrs:{title:t.pageData.title}},[t._v(t._s(t.pageData.title||"未命名作品"))])]),t.btnList.length?a("div",{staticClass:"border-T thumbnail-panel-btn"},[t.btnList.includes("edit")?a("div",{staticClass:"btn-wrapper"},[a("el-button",{staticStyle:{color:"#FFFFFF"},attrs:{type:"text",size:"mini"},on:{click:t.edit}},[t._v("编辑")])],1):t._e(),t.btnList.includes("useTemplate")?a("div",{staticClass:"btn-wrapper"},[a("el-button",{staticStyle:{color:"#FFFFFF"},attrs:{type:"text",size:"mini"},on:{click:t.copyPage}},[t._v("使用模板")])],1):t._e(),t.btnList.includes("copyTemplate")?a("div",{staticClass:"btn-wrapper"},[a("el-button",{staticStyle:{color:"#FFFFFF"},attrs:{type:"text",size:"mini"},on:{click:t.copyPage}},[t._v("复制")])],1):t._e(),t.showMoreBtn?a("div",{staticClass:"btn-wrapper"},[a("el-dropdown",{attrs:{placement:"top-start"},on:{command:t.command}},[a("el-button",{staticStyle:{color:"#FFFFFF"},attrs:{type:"text",size:"mini"}},[t._v("更多 "),a("i",{staticClass:"el-icon-more-outline"})]),a("el-dropdown-menu",[t._l(t.operationDataList,(function(e,i){return[t.btnList.includes(e.eventType)?a("el-dropdown-item",{key:i,attrs:{command:e.eventType}},[a("div",{class:e.extraClassName},[t._v("\n                "+t._s(e.title)+"\n              ")])]):t._e()]}))],2)],1)],1):t._e()]):t._e()]):a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"page-thumbnail-panel create"},[a("div",{staticClass:"temp-create",on:{click:t.newPage}},[a("i",{staticClass:"el-icon-plus"}),a("p",{staticClass:"paddingT10"},[t._v("新建页面")])])])},r=[],c=(a("8e6e"),a("ac6a"),a("456d"),a("ade3")),l=(a("7f7f"),a("5c96")),p=a("1336"),d=a("2b0e"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"协作人管理",visible:t.visible,width:"650px"},on:{"update:visible":function(e){t.visible=e}}},[a("div",[a("div",{staticClass:"new-folder-wrapper paddingL30 padingR30"},[a("div",{staticClass:"title"},[t._v("按人员搜索添加(多选):")]),a("div",{staticClass:"search-wrapper"},[a("div",{staticClass:"input-wrapper"},[a("el-select",{staticClass:"input-i",attrs:{multiple:"",filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入用户名|邮箱|昵称搜索","remote-method":t.remoteMethod_user,loading:t.loading_user},model:{value:t.userInput,callback:function(e){t.userInput=e},expression:"userInput"}},t._l(t.userOptions,(function(t){return a("el-option",{key:t._id,attrs:{label:t.name,value:t._id}})})),1)],1),a("div",{staticClass:"tj-btn"},[a("el-button",{attrs:{type:"primary"},on:{click:t.addUser}},[t._v("添加")])],1)])]),a("div",{staticClass:"user-list-wrapper"},[a("div",{staticClass:"title white"},[t._v("已加入成员:")]),a("div",{staticClass:"user-list"},t._l(t.cooperationUserList,(function(e,i){return a("el-tag",{key:i,staticClass:"user-item",attrs:{size:"mini",closable:""},on:{close:function(a){return t.delUser(e._id,i)}}},[a("img",{staticClass:"userHeadImage",attrs:{src:e.avatar||t.userHeadImage,alt:""}}),t._v("\n          "+t._s(e.name)+"\n        ")])})),1)])])])},g=[],h={components:(i={},Object(c["a"])(i,l["Tag"].name,l["Tag"]),Object(c["a"])(i,l["Select"].name,l["Select"]),Object(c["a"])(i,l["Option"].name,l["Option"]),Object(c["a"])(i,l["Form"].name,l["Form"]),Object(c["a"])(i,l["FormItem"].name,l["FormItem"]),Object(c["a"])(i,l["Dialog"].name,l["Dialog"]),Object(c["a"])(i,l["Button"].name,l["Button"]),i),data:function(){return{userHeadImage:a("685e"),pageId:"",visible:!1,callback:null,loading_user:!1,groupInput:"",groupOptions:[],userInput:[],userOptions:[],cooperationUserList:[]}},created:function(){this.getCooperationList()},methods:{getCooperationList:function(){var t=this;this.$API.getCooperationUserListByPageId({pageId:this.pageId}).then((function(e){t.cooperationUserList=e.body||[]}))},remoteMethod_user:function(t){var e=this;this.loading_user=!0,this.$API.getUserListByKeywords({keywords:t}).then((function(t){e.userOptions=t.body||[],e.loading_user=!1})).catch((function(){e.loading_user=!0}))},addUser:function(){var t=this;this.userInput.length&&this.$API.addCooperation({pageId:this.pageId,userIds:this.userInput}).then((function(e){t.cooperationUserList=e.body||[],t.userInput=[]}))},delUser:function(t,e){var a=this;this.$API.delCooperation({pageId:this.pageId,userId:t}).then((function(){a.cooperationUserList.splice(e,1)}))}}},f=h,v=(a("3c74"),a("2877")),m=Object(v["a"])(f,u,g,!1,null,"2a445b32",null),b=m.exports,w=d["default"].extend(b),C=function(t,e){return s=new w({data:{pageId:t}}),s.$mount(),s.callback=e,document.body.appendChild(s.$el),s.visible=!0,s},y=C;function _(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function P(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?_(Object(a),!0).forEach((function(e){Object(c["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var I={props:{showPublishState:{type:Boolean,default:!0},showMoreBtn:{type:Boolean,default:!0},pageType:{type:String,default:"h5"},pageData:Object,btnList:{type:Array,default:function(){return[]}}},components:(n={},Object(c["a"])(n,l["Dropdown"].name,l["Dropdown"]),Object(c["a"])(n,l["DropdownMenu"].name,l["DropdownMenu"]),Object(c["a"])(n,l["DropdownItem"].name,l["DropdownItem"]),n),data:function(){return{loading:!1,defaultCoverImage:a("5c58"),defaultImg:'this.src="'+a("5c58")+'"',operationDataList:[{title:"发布",eventType:"publish",extraClassName:"",iconClass:""},{title:"发布模板市场",eventType:"publishTemplate",extraClassName:"",iconClass:""},{title:"复制链接",eventType:"copyUrl",iconClass:""},{title:"设为我的模板",eventType:"setTemplate",iconClass:""},{title:"页面数据",eventType:"viewPageData",iconClass:""},{title:"协作设置",eventType:"cooperation",iconClass:""},{title:"删除",eventType:"delete",extraClassName:"error",iconClass:""},{title:"退出协作",eventType:"unCooperation",extraClassName:"error",iconClass:""}]}},methods:{command:function(t){switch(t){case"publish":this.publish();break;case"copyUrl":this.copyUrl();break;case"setTemplate":this.setTemplate();break;case"viewPageData":this.viewPageData();break;case"cooperation":this.cooperation();break;case"delete":this.delete();break;case"unCooperation":this.unCooperation();break;case"publishTemplate":this.publishTemplate();break}},newPage:function(){var t=this,e=p["a"].getProjectConfig();this.loading=!0,this.$API.createPage(P({},e)).then((function(e){t.loading=!1,e.body&&t.$router.push({name:"Editor",query:{id:e.body._id}})})).catch((function(){t.loading=!1}))},edit:function(){this.$router.push({name:"Editor",query:{id:this.pageData._id}})},copyPage:function(){var t=this;this.loading=!0,this.$API.copyPage({id:this.pageData._id}).then((function(e){t.loading=!1,t.$router.push({name:"Editor",query:{id:e.body._id}})})).catch((function(){t.loading=!1}))},publish:function(){var t=this;this.loading=!0,this.$API.publishPage({id:this.pageData._id}).then((function(){t.loading=!1,t.$message.success("发布成功"),t.preview(t.pageData._id),t.$emit("refresh")})).catch((function(){t.loading=!1}))},preview:function(t){this.$emit("showPreview",t)},copyUrl:function(){},setTemplate:function(){var t=this;this.loading=!0,this.$API.setTemplatePage({id:this.pageData._id}).then((function(){t.loading=!1,t.$message.success("已添加到我的模板")})).catch((function(){t.loading=!1}))},viewPageData:function(){this.$router.push({name:"pageDataDetail",query:{id:this.pageData._id}})},cooperation:function(){y(this.pageData._id)},delete:function(){var t=this;this.$alert("确认删除页面？删除后，将无法访问此页面?","操作提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$API.deletePage({id:t.pageData._id}).then((function(){t.$message.success("删除成功！"),t.$emit("refresh")}))}))},unCooperation:function(){var t=this;this.$alert("确认退出协作编辑？退出后，将无法编辑此页面?","操作提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$API.delCooperation({pageId:t.pageData._id,userId:t.$store.state.user.userInfo._id}).then((function(){t.$message.success("已退出！"),t.$emit("refresh")}))}))},publishTemplate:function(){var t=this;this.loading=!0,this.$API.publishPage({id:this.pageData._id}).then((function(){t.loading=!1,t.$message.success("发布成功")})).catch((function(){t.loading=!1}))}}},D=I,$=(a("5532"),Object(v["a"])(D,o,r,!1,null,"3d96b728",null));e["a"]=$.exports},"3c74":function(t,e,a){"use strict";a("2b33")},5532:function(t,e,a){"use strict";a("2e67b")},"566d":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"clearfix my-page-list"},[a("div",{staticClass:"scroll-wrapper page-list-wrapper"},[t.pageList.length?a("el-scrollbar",{staticStyle:{height:"100%"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"page-content"},[a("div",{staticClass:"page-item-wrapper"},t._l(t.pageList,(function(e,i){return a("div",{key:i,staticClass:"page-item"},[a("thumbnailPanel",{attrs:{pageData:e,btnList:["useTemplate"],showMoreBtn:!1,showPublishState:!1},on:{refresh:t.getPageList,showPreview:t.showPreviewFn}})],1)})),0)])]):a("notFundData")],1),t.showPreview?a("previewPage",{attrs:{pageId:t.previewId},on:{closePreview:function(e){t.showPreview=!1}}}):t._e()],1)},s=[],n=(a("7f7f"),a("c5c7")),o=a("2f88"),r=a("bf8b"),c={components:{notFundData:n["a"],thumbnailPanel:o["a"],previewPage:r["a"]},data:function(){return{loading:!1,pageList:[],pageModeList:[],searchParams:{pageMode:"h5"},previewId:"",showPreview:!1}},created:function(){this.pageModeList=this.$config.pageModeList,this.getPageList()},methods:{handlePageModeClick:function(t){this.searchParams.pageMode=t.name,this.getPageList()},getPageList:function(){var t=this;this.$API.getPublishTemplates(this.searchParams).then((function(e){t.pageList=e.body||[]}))},showPreviewFn:function(t){this.previewId=t,this.showPreview=!0}}},l=c,p=(a("fced"),a("8bc8"),a("2877")),d=Object(p["a"])(l,i,s,!1,null,"ff7b1e44",null);e["default"]=d.exports},"5c58":function(t,e,a){t.exports=a.p+"static/img/quark--pagecover-image.ee0294af.png"},"5f6c":function(t,e,a){"use strict";a("077a")},6505:function(t,e,a){},"685e":function(t,e,a){t.exports=a.p+"static/img/headerImage.baefd97f.png"},"6c47":function(t,e,a){},"7f7f":function(t,e,a){var i=a("86cc").f,s=Function.prototype,n=/^\s*function ([^ (]*)/,o="name";o in s||a("9e1e")&&i(s,o,{configurable:!0,get:function(){try{return(""+this).match(n)[1]}catch(t){return""}}})},"8b96":function(t,e,a){},"8bc8":function(t,e,a){"use strict";a("01dc")},"9d10":function(t,e,a){"use strict";a("8b96")},a1a8:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"components-preview"},[a("div",{staticClass:"setting-bg"}),a("div",{staticClass:"left-panel"},[a("div",{staticClass:"iframe-wrapper",style:{width:t.$config.canvasH5Width+"px",height:t.$config.canvasH5Height+"px"}},[a("iframe",{staticStyle:{"background-color":"transparent",width:"100%",height:"100%"},attrs:{src:t.$config.baseURL+"/c317/view/"+t.pageId,frameborder:"0"}})])]),a("div",{staticClass:"right-panel"},[t._t("default")],2),a("span",{staticClass:"cloase-btn",on:{click:t.closePreview}},[a("i",{staticClass:"el-icon-close"})])])},s=[],n={name:"preview-page",props:{pageId:String},data:function(){return{}},created:function(){},methods:{closePreview:function(){this.$emit("closePreview",!1)}}},o=n,r=(a("a4b8"),a("2877")),c=Object(r["a"])(o,i,s,!1,null,"28705c02",null);e["a"]=c.exports},a4b8:function(t,e,a){"use strict";a("6c47")},bf8b:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("previewWrapper",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{pageId:t.pageId},on:{closePreview:t.closePreview}},[a("p",{staticClass:"page-title paddingL30"},[t._v("页面预览")]),t.loading?t._e():a("div",{staticClass:"preview-info-wrapper"},[a("el-form",{attrs:{"label-width":"90px","label-position":"left"}},[a("el-form-item",{attrs:{label:"页面链接:"}},[a("div",[a("el-button",{attrs:{type:"primary"},on:{click:t.doCopy}},[t._v("复制链接")])],1),a("div",{staticClass:"share-wx-config-wrapper"},[t._v(t._s(t.$config.baseURL+"/c317/view/"+t.pageId))])]),a("el-form-item",{attrs:{label:"页面信息:"}})],1),a("div",{staticClass:"page-info"},[a("div",{staticClass:"page-cover"},[a("img",{attrs:{src:t.shareData.coverImage||t.defaultCoverImage,alt:""}})]),a("div",{staticClass:"page-title-des paddingT10"},[a("div",{staticClass:"info-form-wrapper"},[t._v("\n          "+t._s(t.shareData.title)+"\n        ")]),a("div",{staticClass:"info-form-wrapper ellipsis"},[t._v("\n          "+t._s(t.shareData.description)+"\n        ")])])]),a("div",{staticClass:"clearfix paddingT30 text-center"},[a("a",{attrs:{href:t.pageLink,target:"_blank"}},[a("el-button",{attrs:{type:"primary"}},[t._v("新标签打开链接")])],1)])],1)])},s=[],n=a("a1a8"),o={components:{previewWrapper:n["a"]},props:{pageId:String},data:function(){return{loading:!0,defaultCoverImage:a("5c58"),pageData:{}}},created:function(){this.getData()},computed:{pageLink:function(){return this.$config.baseURL+"/c317/view/"+this.pageId},shareData:function(){return this.pageData.shareConfig?this.pageData.shareConfig.shareWx?{coverImage:this.pageData.shareConfig.coverImage,title:this.pageData.shareConfig.title,description:this.pageData.shareConfig.description}:{coverImage:this.pageData.coverImage,title:this.pageData.title,description:this.pageData.description}:{}}},methods:{closePreview:function(){this.$emit("closePreview",!1)},getData:function(){var t=this;this.loading=!0,this.$API.getPageDetail({pageId:this.pageId}).then((function(e){t.loading=!1,t.pageData=e.body})).catch((function(){t.loading=!1}))},doCopy:function(){var t=this;this.$copyText(this.pageLink).then((function(){t.$message.success("已复制")}))}}},r=o,c=(a("5f6c"),a("2877")),l=Object(c["a"])(r,i,s,!1,null,"4527bf8e",null);e["a"]=l.exports},c5c7:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"components-default-style"},[i("div",[i("img",{staticClass:"default-style-img",style:{width:t.width,height:t.height},attrs:{src:a("c5f4"),alt:""}}),i("p",{staticClass:"gray"},[t._v("暂无数据")])])])},s=[],n={name:"notFundData",props:{width:{type:String,default:"128px"},height:{type:String,default:"86px"}}},o=n,r=(a("9d10"),a("2877")),c=Object(r["a"])(o,i,s,!1,null,"341973f6",null);e["a"]=c.exports},c5f4:function(t,e,a){t.exports=a.p+"static/img/nodata.8468dc19.png"},fced:function(t,e,a){"use strict";a("6505")}}]);
//# sourceMappingURL=chunk-636e4388.d2cb6e60.js.map